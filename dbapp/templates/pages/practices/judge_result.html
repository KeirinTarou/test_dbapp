{% extends 'base.html' %}
{% block title %}çµæœåˆ¤å®š{% endblock %}
{% block contents %}
    <main class="page page--sql">
        {% include "parts/intro/judge_result_intro.html" %}
        {% include "parts/judge/message.html" %}
        <!-- æ­£è§£æ™‚ã¯ã‚¯ã‚¨ãƒªã¨å®Ÿè¡Œçµæœã‚’è¡¨ç¤º -->
        {% if result %}
            {% set codeblock_title = "ğŸ‘ğŸ‘ğŸ‘è¦‹äº‹ãªã‚ãªãŸã®ã‚¯ã‚¨ãƒªğŸ‘ğŸ‘ğŸ‘" %}
            {% set user_query = user_query %}
            {% include "parts/judge/codeblock.html" %}
            {% set table_title = "ğŸŠğŸŠğŸŠã™ã°ã‚‰ã—ã„ã‚ãªãŸã®ã‚¯ã‚¨ãƒªã®çµæœğŸŠğŸŠğŸŠ" %}
            {% set columns = user_columns %}
            {% set rows = user_rows %}
            {% include "parts/judge/result_table.html" %}
        <!-- ä¸æ­£è§£æ™‚ã«ä¸ä¸€è‡´ã®è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ -->
        {% else %}
            {% include "parts/judge/detail.html" %}
            {% set codeblock_title = "ğŸ¤®ããã‚­ãƒ¢ã„ã‚ãªãŸã®ã‚¯ã‚¨ãƒª" %}
            {% set user_query = user_query %}
            {% include "parts/judge/codeblock.html" %}
            {% set table_title = "ğŸ¤ªã‚ãªãŸãŒãŸã©ã‚Šç€ã‘ãªã‹ã£ãŸæ­£è§£ã‚¯ã‚¨ãƒªã®çµæœ" %}
            {% set columns = answer_columns %}
            {% set rows = answer_rows %}
            {% include "parts/judge/result_table.html" %}
            {% set table_title = "ğŸ’©ãã£ããƒ€ã‚µã„ã‚ãªãŸã®ã‚¯ã‚¨ãƒªã®çµæœ" %}
            {% set columns = user_columns %}
            {% set rows = user_rows %}
            {% include "parts/judge/result_table.html" %}
        {% endif %}
    </main>
{% endblock %}
{% block loading_logo %}
    {% if result %}
    {% else %}
        <div id="loading-logo">
            <img src="{{ url_for('static', filename='img/aori-face.png') }}" alt="loading logo">
        </div>
    {% endif %}
{% endblock %}
{% block javascript %}
    {% if result %}
        <script>
            const duration = 2.5 * 1000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,                   // ç´™å¹é›ªé‡
                    spread: 90,                         // ãƒ¨ã‚³ã¸ã®åºƒãŒã‚Š
                    origin: { x: Math.random(), y: 0 }, 
                    gravity: 1.5,                       // é‡åŠ›
                    ticks: 200,                         // ç”Ÿå­˜æ™‚é–“
                    scalar: 2.0,                        // å¤§ãã•
                    colors: ['#ff0', '#0ff', '#f0f', '#f00', '#0f0'], 
                });
                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            })();
        </script>
    {% endif %}
{% endblock %}